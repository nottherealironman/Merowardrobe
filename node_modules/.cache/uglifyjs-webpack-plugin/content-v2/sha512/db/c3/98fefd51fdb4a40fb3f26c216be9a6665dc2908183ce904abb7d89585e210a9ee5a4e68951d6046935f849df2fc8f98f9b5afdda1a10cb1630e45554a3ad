{"code":"webpackHotUpdate(0,{191:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(1),i=m(s),o=a(8),d=(m(a(74)),m(a(73)),m(a(72)),a(48)),n=m(a(61)),c=m(a(33)),u=(m(a(10)),m(a(115))),p=m(a(118));a(117);var f=a(116);function m(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleCategoryChange=function(e){var t={};Object.keys(a.state.subcategories).map(function(r,l){a.state.subcategories[r].category==e.target.value&&(t[r]=a.state.subcategories[r].title)});var l=r({},a.state.product_fields);l.subcategory.value=t,a.setState({p_fields:l});var s=[];Object.keys(a.state.sizes).map(function(t,r){a.state.sizes[t].category==e.target.value&&s.push({value:s[t],label:a.state.sizes[t].title})});var i=r({},a.state.product_details_fields);i.sizes.value=s,a.setState({pd_fields:i})},a.handleTabs=function(e,t){var l=r({},a.state.tabs);switch(e){case\"tab1\":l.tab1=\"show active\",l.tab2=\"disabled\"!=a.state.tabs.tab2?\"\":\"disabled\",l.tab3=\"disabled\"!=a.state.tabs.tab3?\"\":\"disabled\";break;case\"tab2\":l.tab2=\"disabled\"!=a.state.tabs.tab2?\"\":\"show active\",l.tab1=\"\",l.tab3=\"disabled\"!=a.state.tabs.tab3?\"\":\"disabled\";break;case\"tab3\":l.tab3=\"disabled\"!=a.state.tabs.tab3?\"\":\"show active\",l.tab1=\"\",l.tab2=\"\"}a.setState({tabs:l})},a.handleChange=function(e){console.log(\"State :\",a.state.subcategories)},a.toggle=a.toggle.bind(a),a.handleFile=a.handleFile.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),l(t,[{key:\"componentWillMount\",value:function(e){var t=this.props.data.brands?this.props.data.brands:{};console.log(this.props.data.product.title),this.state={categories:this.props.data.categories,subcategories:this.props.data.subcategories,sizes:this.props.data.sizes,current_product_id:\"\",current_product_details_id:\"\",product_fields:{title:{type:\"text\",placeholder:\"Product Title\"},gender:{type:\"select\",value:{M:\"For Him\",F:\"For Her\",U:\"Unisex\"}},category:{type:\"select\",value:this.props.data.categories},subcategory:{type:\"select\",value:{}},brand:{type:\"select\",value:t}},product_details_fields:{price:{type:\"text\",placeholder:\"Price\"},sizes:{type:\"select\",value:[]},color:{type:\"text\",placeholder:\"Color\"},description:{type:\"textarea\",placeholder:\"Description\",className:\"dis-block s-text7 mero__textbox bo4 p-l-22 p-r-22 p-t-13 m-b-20 m-t-20\"},specifications:{type:\"textarea\",placeholder:\"Specification\",className:\"dis-block s-text7 mero__textbox bo4 p-l-22 p-r-22 p-t-13 m-b-20\"}},tabs:{tab1:\"active\",tab2:\"disabled\",tab3:\"disabled\"},modal:!1,current_image:\"\",current_file:\"\",images_list:{},image_counter:1,cropped_image:\"\",image_wrapper:\"\"}}},{key:\"toggle\",value:function(){this.setState({modal:!this.state.modal})}},{key:\"createOptions\",value:function(e){return Object.keys(e).map(function(t,a){return i.default.createElement(\"option\",{value:t},e[t])})}},{key:\"handleFile\",value:function(e){var t=this;if(e.target.files&&e.target.files[0]){this.toggle();var a=new FileReader;a.onload=function(e){t.setState({current_image:e.target.result})},this.setState({current_file:e.target.files[0]}),a.readAsDataURL(e.target.files[0])}}},{key:\"removeUpload\",value:function(e){var t=r({},this.state.images_list);delete t[e],this.setState({images_list:t},this.createImageWrapper)}},{key:\"createImageWrapper\",value:function(){var e=this,t=Object.keys(this.state.images_list).map(function(t,a){return i.default.createElement(\"li\",{className:\"list-group-item uploads_list\"},i.default.createElement(\"img\",{src:e.state.images_list[t],width:\"200px\"}),i.default.createElement(\"button\",{class:\"btn btn-danger btn-md pull-right uploads_trash\",onClick:function(){return e.removeUpload(t)}},i.default.createElement(\"i\",{class:\"fa fa-trash\",\"aria-hidden\":\"true\"})))});this.setState({image_wrapper:t})}},{key:\"crop\",value:function(){var e=r({},this.state.images_list);e[this.state.image_counter]=this.refs.cropper.getCroppedCanvas().toDataURL(),this.setState({images_list:e,image_counter:this.state.image_counter+1,cropped_image:this.refs.cropper.getCroppedCanvas().toDataURL()},this.createImageWrapper);var t=this.refs.cropper.getData(),a=new FormData;a.append(\"file\",this.state.current_file),a.append(\"x\",t.x),a.append(\"y\",t.y),a.append(\"height\",t.height),a.append(\"width\",t.width),a.append(\"product\",1),c.default.defaults.xsrfCookieName=\"csrftoken\",c.default.defaults.xsrfHeaderName=\"X-CSRFToken\",(0,c.default)({method:\"POST\",url:\"/product/api/v1/product_uploads\",data:a,processData:!1,contentType:!1}).then(function(e){console.log(e)}),this.toggle()}},{key:\"onTodoChange\",value:function(e){var t=r({},this.state.product_fields);t.title.value=e,this.setState({p_fields:t})}},{key:\"renderForm\",value:function(e,t,a){var r=this,l=\"product\"==a?this.state.product_fields:this.state.product_details_fields;return Object.keys(l).map(function(a,s){return\"select\"==l[a].type&&\"category\"==a?i.default.createElement(\"div\",null,i.default.createElement(\"div\",{className:\"bo4 av__input__box m-t-15\",key:s},i.default.createElement(d.Field,{component:l[a].type,name:a,id:\"id_\"+a,className:\"sizefull s-text7 p-l-22 p-r-22\",onChange:function(e){return r.handleCategoryChange(e)}},i.default.createElement(\"option\",{value:\"\"},\"Select \",\"subcategory\"==a?\"Category first\":a),r.createOptions(l[a].value))),e[a]&&t[a]&&i.default.createElement(\"div\",{class:\"input-feedback\"},\" \",t[a],\" \")):\"select\"==l[a].type&&\"sizes\"==a?i.default.createElement(\"div\",null,i.default.createElement(\"div\",{className:\"bo4 av__input__box m-t-15\",key:s},i.default.createElement(u.default,{isMulti:!0,name:l[a],className:\"basic-multi-select\",classNamePrefix:\"select\",options:l[a].value,onChange:r.handleChange})),e[a]&&t[a]&&i.default.createElement(\"div\",{class:\"input-feedback\"},\" \",t[a],\" \")):\"select\"==l[a].type?i.default.createElement(\"div\",null,i.default.createElement(\"div\",{className:\"brand\"==a?\"bo4 av__input__box m-t-15 m-b-15\":\"bo4 av__input__box m-t-15\",key:s},i.default.createElement(d.Field,{component:l[a].type,name:a,id:\"id_\"+a,className:\"sizefull s-text7 p-l-22 p-r-22\"},i.default.createElement(\"option\",{value:\"\"},\"Select \",\"subcategory\"==a?\"Category first\":a),r.createOptions(l[a].value))),e[a]&&t[a]&&i.default.createElement(\"div\",{class:\"input-feedback\"},\" \",t[a],\" \")):\"text\"==l[a].type?i.default.createElement(\"div\",null,i.default.createElement(\"div\",{className:\"bo4 av__input__box m-t-15\",key:s},i.default.createElement(d.Field,{type:l[a].type,name:a,id:\"id_\"+a,className:\"sizefull s-text7 p-l-22 p-r-22\",placeholder:l[a].placeholder})),e[a]&&t[a]&&i.default.createElement(\"div\",{class:\"input-feedback\"},\" \",t[a],\" \")):\"textarea\"==l[a].type?i.default.createElement(\"div\",null,i.default.createElement(\"textarea\",{rows:\"5\",name:a,id:\"id_\"+a,className:l[a].className,placeholder:l[a].placeholder}),e[a]&&t[a]&&i.default.createElement(\"div\",{class:\"input-feedback\"},\" \",t[a],\" \")):void 0})}},{key:\"render\",value:function(){var e=this;return i.default.createElement(\"div\",{className:\"col-md-5 p-b-30\"},i.default.createElement(\"label\",null,\"ADD PRODUCT\"),i.default.createElement(\"ul\",{className:\"nav nav-tabs\",id:\"myTab\",role:\"tablist\"},i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"a\",{className:\"nav-link \"+this.state.tabs.tab1,onClick:function(t){return e.handleTabs(\"tab1\",t)},id:\"product_info-tab\",\"data-toggle\":\"tab\",href:\"#product_info\",role:\"tab\",\"aria-controls\":\"product_info\",\"aria-selected\":\"true\"},\"Product Info\")),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"a\",{className:\"nav-link \"+this.state.tabs.tab2,onClick:function(t){return e.handleTabs(\"tab2\",t)},id:\"product_details-tab\",\"data-toggle\":\"tab\",href:\"#product_details\",role:\"tab\",\"aria-controls\":\"product_details\",\"aria-selected\":\"false\"},\"Product Details\")),i.default.createElement(\"li\",{className:\"nav-item\"},i.default.createElement(\"a\",{className:\"nav-link \"+this.state.tabs.tab3,onClick:function(t){return e.handleTabs(\"tab3\",t)},id:\"images_upload-tab\",\"data-toggle\":\"tab\",href:\"#images_upload\",role:\"tab\",\"aria-controls\":\"images_upload\",\"aria-selected\":\"false\"},\"Images Upload\"))),i.default.createElement(\"div\",{className:\"tab-content\",id:\"myTabContent\"},i.default.createElement(\"div\",{className:\"tab-pane fade show \"+this.state.tabs.tab1,id:\"product_info\",role:\"tabpanel\",\"aria-labelledby\":\"product_info-tab\"},i.default.createElement(\"div\",{className:\"product_add__form\"},i.default.createElement(d.Formik,{enableReinitialize:!0,initialValues:{title:this.props.data.product.title?this.props.data.product.title:\"\",gender:this.props.data.product.gender?this.props.data.product.gender:\"\",category:this.props.data.product.category?this.props.data.product.category:\"\",subcategory:this.props.data.product.subcategory?this.props.data.product.subcategory:\"\",brand:this.props.data.product.brand?this.props.data.product.brand:\"\"},validationSchema:n.default.object().shape({title:n.default.string().required(\"Title is required\"),gender:n.default.string().required(\"Gender is required\"),category:n.default.number().required(\"Category is required\"),subcategory:n.default.number().required(\"Subcategory is required\"),brand:n.default.number().required(\"Brand is required\")}),onSubmit:function(t,a){a.resetForm,a.setErrors;var l=a.setSubmitting;console.log(t);var s=new FormData,i=\"post\",o=\"/product/api/v1/\";e.state.current_product_id&&(i=\"put\",o=\"/product/api/v1/\"+e.state.current_product_id+\"/\"),s.append(\"title\",t.title),s.append(\"gender\",t.gender),s.append(\"category\",1),s.append(\"subcategory\",t.subcategory),s.append(\"brand\",t.brand),s.append(\"user\",1),l(!1),c.default.defaults.xsrfCookieName=\"csrftoken\",c.default.defaults.xsrfHeaderName=\"X-CSRFToken\",(0,c.default)({method:i,url:o,data:s}).then(function(t){console.log(t.data);var a=r({},e.state.tabs);a.tab1=\"\",a.tab2=\"show active\",e.setState({tabs:a}),e.setState({current_product_id:t.data.id}),console.log(e.state)})},render:function(t){t.values;var a=t.errors,r=t.touched,l=t.handleSubmit,s=t.isSubmitting;return i.default.createElement(\"div\",null,i.default.createElement(d.Form,{onSubmit:l,className:\"leave-comment\",method:\"post\"},e.renderForm(r,a,\"product\"),i.default.createElement(\"button\",{disabled:s,className:\"flex-c-m av__btn__fullwidth bg1 hov1 m-text3 trans-0-4\"},\"Next\")))}}))),i.default.createElement(\"input\",{type:\"hidden\",name:\"product\",id:\"js-product_id\",defaultValue:\"{% firstof product_data.id '' %}\"}),i.default.createElement(\"div\",{className:\"tab-pane fade \"+this.state.tabs.tab2,id:\"product_details\",role:\"tabpanel\",\"aria-labelledby\":\"product_details-tab\"},i.default.createElement(\"div\",{className:\"product_add__form\"},i.default.createElement(d.Formik,{initialValues:{price:\"\",color:\"\"},validationSchema:n.default.object().shape({price:n.default.string().required(\"Price is required\"),color:n.default.string().required(\"Color is required\")}),onSubmit:function(t,a){a.resetForm,a.setErrors;var l=a.setSubmitting;console.log(t);var s=new FormData;s.append(\"price\",t.price),s.append(\"size\",t.sizes),s.append(\"color\",t.color),s.append(\"description\",t.description),s.append(\"specifications\",t.specifications),s.append(\"status\",1),s.append(\"product\",e.state.current_product_id),l(!1),c.default.defaults.xsrfCookieName=\"csrftoken\",c.default.defaults.xsrfHeaderName=\"X-CSRFToken\",(0,c.default)({method:\"post\",url:\"/product/productdetails/api/v1/\",data:s}).then(function(t){console.log(t.data);var a=r({},e.state.tabs);a.tab1=\"\",a.tab2=\"\",a.tab3=\"show active\",e.setState({tabs:a}),e.setState({current_product_details_id:t.data.product})})},render:function(t){t.values;var a=t.errors,r=t.touched,l=(t.handleSubmit,t.isSubmitting);return i.default.createElement(\"div\",null,i.default.createElement(d.Form,{className:\"leave-comment\",id:\"js-add_product_details_form\",method:\"post\"},e.renderForm(r,a,\"product_details\"),i.default.createElement(\"button\",{disabled:l,className:\"flex-c-m av__btn__fullwidth bg1 hov1 m-text3 trans-0-4\"},\"Next\")))}}))),i.default.createElement(\"div\",{className:\"tab-pane fade \"+this.state.tabs.tab3,id:\"images_upload\",role:\"tabpanel\",\"aria-labelledby\":\"images_upload-tab\"},i.default.createElement(\"div\",{className:\"product_add__form\"},i.default.createElement(\"ul\",{className:\"list-group mb-10\"},this.state.image_wrapper),i.default.createElement(\"label\",{class:\"btn btn-primary\",id:\"id_file_label\",for:\"id_file\"},\"Upload Image\"),i.default.createElement(\"input\",{type:\"file\",name:\"upload\",id:\"id_file\",ref:\"upload_file\",style:{display:\"none\"},onChange:this.handleFile}),i.default.createElement(f.Modal,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},i.default.createElement(f.ModalHeader,{toggle:this.toggle},\"Modal title\"),i.default.createElement(f.ModalBody,null,i.default.createElement(p.default,{ref:\"cropper\",src:this.state.current_image,style:{height:400,width:\"100%\"},aspectRatio:16/9,guides:!1})),i.default.createElement(f.ModalFooter,null,i.default.createElement(f.Button,{color:\"success\",onClick:this.crop.bind(this)},\"Crop\"),i.default.createElement(f.Button,{color:\"secondary\",onClick:this.toggle},\"Cancel\"))),i.default.createElement(f.Button,{className:\"flex-c-m av__btn__fullwidth bg1 hov1 m-text3 trans-0-4\",onClick:function(){return e.uploadImages()}},\"Submit\")))))}}]),t}();t.default=(0,o.connect)(function(e){return{data:e.data}})(b)}});","extractedComments":[]}